sudo build/native/gcc/bin/fd_shmem_cfg alloc 450 gigantic 0

sudo build/native/gcc/bin/fd_shmem_cfg reset

rm -f *.tar.* && wget --trust-server-names https://api.mainnet-beta.solana.com/snapshot.tar.bz2

sudo build/native/gcc/bin/fd_frank_ledger --cmd ingest --snapshotfile snapshot-* --pages 400 --backup /data/asiegel/main_backup --indexmax 500000000

echo "topology = \"tvu\"
[tiles.tvu]
  gossip_peer_addr = \"204.16.244.150:8001\"
  incremental_snapshot = \"https://api.mainnet-beta.solana.com/incremental-snapshot.tar.bz2\"
  load = \"/data/asiegel/main_backup\"
  rpc_listen_port = 8123
  page_cnt = 350
" > mainnet.toml

sudo build/native/gcc/bin/fddev --no-clone --no-sandbox --no-solana-labs --config mainnet.toml
