<!-- THIS FILE WAS GENERATED BY genMetrics.js. DO NOT EDIT BY HAND! -->

# Metrics

## Introduction

This page describes all possible metrics that could potentially be collected 
and reported by Firedancer. Metrics are grouped into categories and are essential 
for monitoring the system's performance, debugging issues, and ensuring operational 
stability.

To maintain consistency and ensure that monitoring tools relying on these metrics 
are not disrupted, all metrics are designed to be backwards compatible. Existing 
metric names will not be changed to avoid breaking dependencies. Instead, outdated 
metrics will be deprecated, and new metrics will be introduced to accommodate any 
required changes or enhancements.

## Metrics Structure

Metrics are categorized into `enum` and `group` types:

- **`<enum>`**: Defines a set of named values, usually representing different 
states or types. These are useful for categorizing discrete states or results.
- **`<group>`**: Organizes related metrics into groups. Each group can contain multiple 
metrics defined using `<counter>`, `<gauge>`, `<histogram>` and `<summary>` 
elements.

Each `<enum>` and `<group>` element has a `name` attribute that uniquely 
identifies it. The metrics within a `<group>` are defined with specific attributes 
and optionally detailed descriptions.

For more information on these metric types, please refer to the 
[Prometheus documentation](https://prometheus.io/docs/concepts/metric_types/#summary).
      

## Summary

| Metric Name | Type | Description |
| --- | --- | --- |
| [TpuReasm](#tpureasm) | Enum | Result of publishing reassmbled fragment for a QUIC transaction. |
| [QuicStreamType](#quicstreamtype) | Enum | Number of streams closed. |
| [PackTxnInsertReturn](#packtxninsertreturn) | Enum | Result of inserting a transaction into the pack object |
| [PackTxnSchedule](#packtxnschedule) | Enum | Result of trying to consider a transaction for scheduling |
| [PackTimingState](#packtimingstate) | Enum | Time in nanos spent in each state |
| [BankSlotAcquire](#bankslotacquire) | Enum | Result of acquiring a slot. |
| [BankLoadAddressLookupTable](#bankloadaddresslookuptable) | Enum | Result of loading address lookup tables for a transaction. If there are multiple errors for the transaction, only the first one is reported. |
| [TransactionError](#transactionerror) | Enum | When a transaction executes (makes it onto the chain), result of executing a transaction. The transaction can still fail. |
| [ShredProcessingResult](#shredprocessingresult) | Enum | The result of processing a thread from the network |
| [SnapshotStatus](#snapshotstatus) | Enum | The snapshot and incremental snapshot progress |
| [Link (link: all, linkside: out)](#link-link-all-linkside-out) | Group |  |
| [Link (link: all, linkside: in)](#link-link-all-linkside-in) | Group |  |
| [Tile (tile: all)](#tile-tile-all) | Group |  |
| [Stem (tile: all)](#stem-tile-all) | Group |  |
| [QuicTile (tile: quic)](#quictile-tile-quic) | Group |  |
| [BankTile (tile: bank)](#banktile-tile-bank) | Group |  |
| [PohTile (tile: poh)](#pohtile-tile-poh) | Group |  |
| [Quic (tile: quic)](#quic-tile-quic) | Group |  |
| [Pack (tile: pack)](#pack-tile-pack) | Group |  |
| [Shred (tile: shred)](#shred-tile-shred) | Group |  |
| [StoreTile (tile: store)](#storetile-tile-store) | Group |  |
| [Replay (tile: storei)](#replay-tile-storei) | Group |  |
| [Replay (tile: replay)](#replay-tile-replay) | Group |  |

## TpuReasm
TpuReasm is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | Success | Success
1 | ErrorOversize | Oversize message
2 | ErrorSkip | Out-of-order data within QUIC stream
3 | ErrorState | Unexpected slot state


## QuicStreamType
QuicStreamType is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | BidiClient | Bidirectional client
1 | BidiServer | Bidirectional server
2 | UniClient | Unidirectional client
3 | UniServer | Unidirectional server


## PackTxnInsertReturn
PackTxnInsertReturn is a Enum Type


### Type: int

value | name | label
--- | --- | ---
-11 | Full | Pack couldn't find a transaction that the new transaction could potentially replace
-10 | WriteSysvar | Transaction tries to write to a sysvar
-9 | EstimationFail | Estimating compute cost and/or fee failed
-8 | DuplicateAccount | Transaction included an account address twice
-7 | TooManyAccounts | Transaction tried to load too many accounts
-6 | TooLarge | Transaction requests too many CUs
-5 | Expired | Transaction already expired
-4 | AddrLut | Transaction loaded accounts from a lookup table
-3 | Unaffordable | Fee payer's balance below transaction fee
-2 | Duplicate | Pack aware of transaction with same signature
-1 | Priority | Transaction's fee was too low given its compute unit requirement and other competing transactions
0 | NonvoteAdd | Transaction that was not a simple vote added to pending transactions
1 | VoteAdd | Simple vote transaction was added to pending transactions
2 | NonvoteReplace | Transaction that was not a simple vote replaced a lower priority transaction
3 | VoteReplace | Simple vote transaction replaced a lower priority transaction


## PackTxnSchedule
PackTxnSchedule is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | Taken | Pack included the transaction in the microblock
1 | CuLimit | Pack skipped the transaction because it would have exceeded the block CU limit
2 | FastPath | Pack skipped the transaction because of account conflicts using the fast bitvector check
3 | ByteLimit | Pack skipped the transaction because it would have exceeded the block data size limit
4 | WriteCost | Pack skipped the transaction because it would have caused a writable account to exceed the per-account block write cost limit
5 | SlowPath | Pack skipped the transaction because of account conflicts using the full slow check


## PackTimingState
PackTimingState is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | NoTxnNoBankNoLeaderNoMicroblock | Pack had no transactions available, and wasn't leader
1 | TxnNoBankNoLeaderNoMicroblock | Pack had transactions available, but wasn't leader or had hit a limit
2 | NoTxnBankNoLeaderNoMicroblock | Pack had no transactions available, had banks but wasn't leader?
3 | TxnBankNoLeaderNoMicroblock | Pack had transactions available, had banks but wasn't leader?
4 | NoTxnNoBankLeaderNoMicroblock | Pack had no transactions available, and was leader but had no available banks
5 | TxnNoBankLeaderNoMicroblock | Pack had transactions available, was leader, but had no available banks
6 | NoTxnBankLeaderNoMicroblock | Pack had available banks but no transactions
7 | TxnBankLeaderNoMicroblock | Pack had banks and transactions available but couldn't schedule anything non-conflicting
8 | NoTxnNoBankNoLeaderMicroblock | Pack scheduled a non-empty microblock while not leader?
9 | TxnNoBankNoLeaderMicroblock | Pack scheduled a non-empty microblock while not leader?
10 | NoTxnBankNoLeaderMicroblock | Pack scheduled a non-empty microblock while not leader?
11 | TxnBankNoLeaderMicroblock | Pack scheduled a non-empty microblock while not leader?
12 | NoTxnNoBankLeaderMicroblock | Pack scheduled a non-empty microblock but all banks were busy?
13 | TxnNoBankLeaderMicroblock | Pack scheduled a non-empty microblock but all banks were busy?
14 | NoTxnBankLeaderMicroblock | Pack scheduled a non-empty microblock and now has no transactions
15 | TxnBankLeaderMicroblock | Pack scheduled a non-empty microblock


## BankSlotAcquire
BankSlotAcquire is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | Success | Success
1 | TooHigh | Too high
2 | TooLow | Too low


## BankLoadAddressLookupTable
BankLoadAddressLookupTable is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | Success | Success
1 | SlotHashesSysvarNotFound | The slot hashes syvar could not be found.
2 | AccountNotFound | The account storing the address lookup table was deactivated or could not be found.
3 | InvalidAccountOwner | The account that owns the referenced lookup table is not the address lookup table program.
4 | InvalidAccountData | The data for the referenced address lookup table is malformed.
5 | InvalidIndex | The referenced index in the address lookup table does not exist.


## TransactionError
TransactionError is a Enum Type


### Type: int

value | name | label
--- | --- | ---
0 | Success | Success
1 | AccountInUse | An account is already being processed in another transaction in a way that does not support parallelism.
2 | AccountLoadedTwice | A `Pubkey` appears twice in the transaction's `account_keys`.  Instructions can reference `Pubkey`s more than once but the message must contain a list with no duplicate keys.
3 | AccountNotFound | Attempt to debit an account but found no record of a prior credit.
4 | ProgramAccountNotFound | Attempt to load a program that does not exist.
5 | InsufficientFundsForFee | The fee payer `Pubkey` does not have sufficient balance to pay the fee to schedule the transaction.
6 | InvalidAccountForFee | This account may not be used to pay transaction fees.
7 | AlreadyProcessed | The bank has seen this transaction before. This can occur under normal operation when a UDP packet is duplicated, as a user error from a client not updating its `recent_blockhash`, or as a double-spend attack.
8 | BlockhashNotFound | The bank has not seen the given `recent_blockhash` or the transaction is too old and the `recent_blockhash` has been discarded.
9 | InstructionError | An error occurred while processing an instruction.
10 | CallChainTooDeep | Loader call chain is too deep.
11 | MissingSignatureForFee | Transaction requires a fee but has no signature present.
12 | InvalidAccountIndex | Transaction contains an invalid account reference.
13 | SignatureFailure | Transaction did not pass signature verification.
14 | InvalidProgramForExecution | This program may not be used for executing instructions.
15 | SanitizeFailure | Transaction failed to sanitize accounts offsets correctly implies that account locks are not taken for this TX, and should not be unlocked.
16 | ClusterMaintenance | Transactions are currently disabled due to cluster maintenance.
17 | AccountBorrowOutstanding | Transaction processing left an account with an outstanding borrowed reference.
18 | WouldExceedMaxBlockCostLimit | Transaction would exceed max Block Cost Limit.
19 | UnsupportedVersion | Transaction version is unsupported.
20 | InvalidWritableAccount | Transaction loads a writable account that cannot be written.
21 | WouldExceedMaxAccountCostLimit | Transaction would exceed max account limit within the block.
22 | WouldExceedAccountDataBlockLimit | Transaction would exceed account data limit within the block.
23 | TooManyAccountLocks | Transaction locked too many accounts.
24 | AddressLookupTableNotFound | Address lookup table not found.
25 | InvalidAddressLookupTableOwner | Attempted to lookup addresses from an account owned by the wrong program.
26 | InvalidAddressLookupTableData | Attempted to lookup addresses from an invalid account.
27 | InvalidAddressLookupTableIndex | Address table lookup uses an invalid index.
28 | InvalidRentPayingAccount | Transaction leaves an account with a lower balance than rent-exempt minimum.
29 | WouldExceedMaxVoteCostLimit | Transaction would exceed max Vote Cost Limit.
30 | WouldExceedAccountDataTotalLimit | Transaction would exceed total account data limit.
31 | DuplicateInstruction | Transaction contains a duplicate instruction that is not allowed.
32 | InsufficientFundsForRent | Transaction results in an account with insufficient funds for rent.
33 | MaxLoadedAccountsDataSizeExceeded | Transaction exceeded max loaded accounts data size cap.
34 | InvalidLoadedAccountsDataSizeLimit | LoadedAccountsDataSizeLimit set for transaction must be greater than 0.
35 | ResanitizationNeeded | Sanitized transaction differed before/after feature activiation. Needs to be resanitized.
36 | ProgramExecutionTemporarilyRestricted | Program execution is temporarily restricted on an account.
37 | UnbalancedTransaction | The total balance before the transaction does not equal the total balance after the transaction.


## ShredProcessingResult
ShredProcessingResult is a Enum Type


### Type: int

value | name | label
--- | --- | ---
-4 | BadSlot | Shred was for a slot for which we don't know the leader
-3 | ParseFailed | Shred parsing failed
-2 | Rejected | Shred was invalid for one of many reasons
-1 | Ignored | Shred was ignored because we had already received or reconstructed it
0 | Okay | Shred accepted to an incomplete FEC set
1 | Completes | Shred accepted and resulted in a valid, complete FEC set


## SnapshotStatus
SnapshotStatus is a Enum Type


### Type: int

value | name | label
--- | --- | ---
1 | SnapshotBegin | Set immediately before the call to fd_snapshot_load
2 | SnapshotEnd | Set after fd_snapshot_load has completed
3 | IncrementalBegin | Set immediately before the call to fd_snapshot_load
4 | IncrementalEnd | Set after fd_snapshot_load has completed


## Link (link: all, linkside: out)
Link is a Group Type
- **link**: all
- **linkside**: out

### Type: counter

name | summary
--- | ---
SlowCount | The number of times the consumer was detected as rate limiting consumer by the producer.


## Link (link: all, linkside: in)
Link is a Group Type
- **link**: all
- **linkside**: in

### Type: counter

name | summary
--- | ---
PublishedCount | The number of times the link has consumed and published a fragment.
PublishedSizeBytes | The total number of bytes read by the link consumer.
FilteredCount | The number of consumed fragments that were filtered.
FilteredSizeBytes | The total number of bytes read  by the link consumer that were filtered.
OverrunPollingCount | The number of times the link has been overrun while polling.
OverrunPollingFragCount | The number of fragments the link has not processed because it was overrun while polling.
OverrunReadingCount | The number of input overruns detected while reading metadata by the consumer.


## Tile (tile: all)
Tile is a Group Type
- **tile**: all

### Type: gauge

name | summary
--- | ---
Pid | The process ID of the tile.
Tid | The thread ID of the tile. Always the same as the Pid in production, but might be different in development.


## Stem (tile: all)
Stem is a Group Type
- **tile**: all

### Type: gauge

name | summary
--- | ---
InBackpressure | Whether the tile is currently backpressured or not, either 1 or 0.

### Type: counter

name | summary
--- | ---
BackpressureCount | Number of times the times the tile has had to wait for one of more consumers to catch up to resume publishing.

### Type: histogram

name | min | max | converter
--- | --- | --- | ---
LoopHousekeepingDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopBackpressureDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopCaughtUpDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopOverrunPollingDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopOverrunReadingDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopFilterBeforeFragmentDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopFilterAfterFragmentDurationSeconds | 0.000000050 | 0.000050 | seconds
LoopFinishDurationSeconds | 0.000000050 | 0.000050 | seconds
FragmentFilteredSizeBytes | 0 | 2094 | 
FragmentHandledSizeBytes | 0 | 2094 | 


## QuicTile (tile: quic)
QuicTile is a Group Type
- **tile**: quic

### Type: counter

name | enum | summary
--- | --- | ---
NonQuicReassemblyAppend | TpuReasm | Result of fragment reassembly for a non-QUIC UDP transaction.
NonQuicReassemblyPublish | TpuReasm | Result of publishing reassmbled fragment for a non-QUIC UDP transaction.
ReassemblyAppend | TpuReasm | Result of fragment reassembly for a QUIC transaction.
ReassemblyPublish | TpuReasm | Result of publishing reassmbled fragment for a QUIC transaction.
ReassemblyNotifyClobbered |  | Reassembly slot was clobbered before it was notified.
QuicPacketTooSmall |  | Count of packets received on the QUIC port that were too small to be a valid IP packet.
NonQuicPacketTooSmall |  | Count of packets received on the non-QUIC port that were too small to be a valid IP packet.
NonQuicPacketTooLarge |  | Count of packets received on the non-QUIC port that were too large to be a valid transaction.


## BankTile (tile: bank)
BankTile is a Group Type
- **tile**: bank

### Type: counter

name | summary
--- | ---
TransactionSanitizeFailure | Number of transactions that failed to sanitize.
TransactionNotExecutedFailure | Number of transactions that did not execute. This is different than transactions which fail to execute, which make it onto the chain.
SlotAcquire | Result of acquiring a slot.
TransactionLoadAddressTables | Result of loading address lookup tables for a transaction. If there are multiple errors for the transaction, only the first one is reported.
TransactionLoad | Result of loading a transaction.
TransactionExecuting | Result of executing a transaction. Could be a failure or success.
TransactionExecuted | When a transaction executes (makes it onto the chain), result of executing a transaction. The transaction can still fail.


## PohTile (tile: poh)
PohTile is a Group Type
- **tile**: poh

### Type: histogram

name | min | max | converter
--- | --- | --- | ---
BeginLeaderDelaySeconds | 0.00000001 | 0.01 | seconds
FirstMicroblockDelaySeconds | 0.00000001 | 0.01 | seconds
SlotDoneDelaySeconds | 0.001 | 0.6 | seconds


## Quic (tile: quic)
Quic is a Group Type
- **tile**: quic

### Type: counter

name | summary
--- | ---
ReceivedPackets | Number of IP packets received.
ReceivedBytes | Total bytes received (including IP, UDP, QUIC headers).
SentPackets | Number of IP packets sent.
SentBytes | Total bytes sent (including IP, UDP, QUIC headers).
ConnectionsCreated | The total number of connections that have been created.
ConnectionsClosed | Number of connections gracefully closed.
ConnectionsAborted | Number of connections aborted.
ConnectionsRetried | Number of connections established with retry.
ConnectionErrorNoSlots | Number of connections that failed to create due to lack of slots.
ConnectionErrorTlsFail | Number of connections that aborted due to TLS failure.
ConnectionErrorRetryFail | Number of connections that failed during retry (e.g. invalid token).
HandshakesCreated | Number of handshake flows created.
HandshakeErrorAllocFail | Number of handshakes dropped due to alloc fail.
StreamOpened | Number of streams opened.
StreamClosed | Number of streams closed.
StreamReceivedEvents | Number of stream RX events.
StreamReceivedBytes | Total stream payload bytes received.

### Type: gauge

name | summary
--- | ---
ConnectionsActive | The number of currently active QUIC connections.
StreamActive | Number of active streams.


## Pack (tile: pack)
Pack is a Group Type
- **tile**: pack

### Type: histogram

name | min | max | converter
--- | --- | --- | ---
ScheduleMicroblockDurationSeconds | 0.00000001 | 0.1 | seconds
InsertTransactionDurationSeconds | 0.00000001 | 0.1 | seconds
TotalTransactionsPerMicroblockCount | 0 | 64 | 
VotesPerMicroblockCount | 0 | 64 | 

### Type: counter

name | summary
--- | ---
GossipedVotesReceived | Count of simple vote transactions received over gossip instead of via the normal TPU path
NormalTransactionReceived | Count of transactions received via the normal TPU path
TransactionInserted | Result of inserting a transaction into the pack object
MetricTiming | Time in nanos spent in each state
TransactionDroppedFromExtra | Transactions dropped from the extra transaction storage because it was full
TransactionInsertedToExtra | Transactions inserted into the extra transaction storage because pack's primary storage was full
TransactionInsertedFromExtra | Transactions pulled from the extra transaction storage and inserted into pack's primary storage
MicroblockPerBlockLimit | The number of times pack did not pack a microblock because the limit on microblocks/block had been reached
DataPerBlockLimit | The number of times pack did not pack a microblock because it reached reached the data per block limit at the start of trying to schedule a microblock
TransactionSchedule | Result of trying to consider a transaction for scheduling
DeleteMissed | Count of attempts to delete a transaction that wasn't found
DeleteHit | Count of attempts to delete a transaction that was found and deleted

### Type: gauge

name | summary
--- | ---
AvailableTransactions | The total number of pending transactions in pack's pool that are available to be scheduled
AvailableVoteTransactions | The number of pending simple vote transactions in pack's pool that are available to be scheduled
PendingTransactionsHeapSize | The maximum number of pending transactions that pack can consider.  This value is fixed at Firedancer startup but is a useful reference for AvailableTransactions and AvailableVoteTransactions.


## Shred (tile: shred)
Shred is a Group Type
- **tile**: shred

### Type: histogram

name | min | max
--- | --- | ---
ClusterContactInfoCnt | 0 | 40200
BatchSz | 1024 | 65536
BatchMicroblockCnt | 2 | 256
ShreddingDurationSeconds | 0.00001 | 0.01
AddShredDurationSeconds | 0.00000001 | 0.001

### Type: counter

name | summary
--- | ---
MicroblocksAbandoned | The number of microblocks that were abandoned because we switched slots without finishing the current slot
ShredProcessed | The result of processing a thread from the network
FecSetSpilled | The number of FEC sets that were spilled because they didn't complete in time and we needed space
ShredRejectedInitial | The number shreds that were rejected before any resources were allocated for the FEC set
FecRejectedFatal | The number of FEC sets that were rejected for reasons that cause the whole FEC set to become invalid


## StoreTile (tile: store)
StoreTile is a Group Type
- **tile**: store

### Type: counter

name | summary
--- | ---
TransactionsInserted | Count of transactions produced while we were leader in the shreds that have been inserted so far


## Replay (tile: storei)
Replay is a Group Type
- **tile**: storei

### Type: gauge

name | summary
--- | ---
Behind | The total number of slots we are behind
CaughtUp | Boolean value which indicates if we have caught up
Slot | The current turbine slot


## Replay (tile: replay)
Replay is a Group Type
- **tile**: replay

### Type: counter

name | enum | summary
--- | --- | ---
SnapshotStatus | SnapshotStatus | The snapshot and incremental snapshot progress


